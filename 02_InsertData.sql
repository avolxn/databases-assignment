USE StudentTestingDB;
GO

-- Факультеты
INSERT INTO Faculties (FacultyName) VALUES
(N'Институт экономики и управления'),
(N'Институт компьютерных наук'),
(N'Институт базового образования');
GO

-- Преподаватели
INSERT INTO Teachers (LastName, FirstName, MiddleName, Email) VALUES
(N'Иванов', N'Петр', N'Сергеевич', N'ivanov@uni.edu'),
(N'Петрова', N'Анна', N'Владимировна', N'petrova@uni.edu'),
(N'Сидоров', N'Алексей', N'Николаевич', N'sidorov@uni.edu'),
(N'Козлова', N'Мария', N'Александровна', N'kozlova@uni.edu'),
(N'Новиков', N'Дмитрий', N'Игоревич', N'novikov@uni.edu'),
(N'Морозова', N'Елена', N'Павловна', N'morozova@uni.edu'),
(N'Волков', N'Сергей', N'Андреевич', N'volkov@uni.edu'),
(N'Соколова', N'Ольга', N'Дмитриевна', N'sokolova@uni.edu'),
(N'Лебедев', N'Игорь', N'Викторович', N'lebedev@uni.edu'),
(N'Кузнецова', N'Татьяна', N'Олеговна', N'kuznetsova@uni.edu');
GO

-- Дисциплины
INSERT INTO Subjects (SubjectName) VALUES
(N'Микроэкономика'),
(N'Макроэкономика'),
(N'Управление проектами'),
(N'Базы данных'),
(N'Программирование на Python'),
(N'Автоматизированные системы управления'),
(N'Высшая математика'),
(N'Общая физика');
GO

-- Группы
INSERT INTO Groups (GroupName, FacultyID) VALUES
-- Институт экономики и управления
(N'ЭК-24-1', 1),
(N'МЕН-24-2', 1),
-- Институт компьютерных наук
(N'БИВТ-24-4', 2),
(N'БПМ-24-4', 2),
(N'БПИ-24-6', 2),
-- Институт базового образования
(N'МАТ-24-1', 3);
GO

-- Студенты
INSERT INTO Students (LastName, FirstName, MiddleName, GroupID, Email) VALUES
-- Институт экономики и управления, группа ЭК-24-1
(N'Александров', N'Иван', N'Петрович', 1, NULL),
(N'Борисова', N'Екатерина', N'Сергеевна', 1, NULL),
(N'Васильев', N'Михаил', N'Андреевич', 1, NULL),
(N'Григорьева', N'Анастасия', N'Игоревна', 1, NULL),
(N'Дмитриев', N'Артем', N'Олегович', 1, NULL),
-- Институт экономики и управления, группа МЕН-24-2
(N'Егоров', N'Никита', N'Владимирович', 2, NULL),
(N'Жукова', N'Виктория', N'Александровна', 2, NULL),
(N'Зайцев', N'Денис', N'Николаевич', 2, NULL),
(N'Иванова', N'Полина', N'Дмитриевна', 2, NULL),
(N'Кириллов', N'Максим', N'Сергеевич', 2, NULL),
-- Институт компьютерных наук, группа БИВТ-24-4
(N'Лазарев', N'Андрей', N'Викторович', 3, NULL),
(N'Макарова', N'Дарья', N'Павловна', 3, NULL),
(N'Николаев', N'Роман', N'Игоревич', 3, NULL),
(N'Орлова', N'София', N'Андреевна', 3, NULL),
(N'Павлов', N'Кирилл', N'Олегович', 3, NULL),
-- Институт компьютерных наук, группа БПМ-24-4
(N'Романов', N'Владислав', N'Петрович', 4, NULL),
(N'Смирнова', N'Алина', N'Сергеевна', 4, NULL),
(N'Тимофеев', N'Егор', N'Андреевич', 4, NULL),
(N'Ульянова', N'Мария', N'Игоревна', 4, NULL),
(N'Федоров', N'Артур', N'Олегович', 4, NULL),
-- Институт компьютерных наук, группа БПИ-24-6
(N'Харитонов', N'Илья', N'Владимирович', 5, NULL),
(N'Цветкова', N'Елизавета', N'Александровна', 5, NULL),
(N'Чернов', N'Даниил', N'Николаевич', 5, NULL),
(N'Шевченко', N'Ксения', N'Дмитриевна', 5, NULL),
(N'Щербаков', N'Тимур', N'Сергеевич', 5, NULL),
-- Институт базового образования, группа МАТ-24-1
(N'Яковлев', N'Глеб', N'Викторович', 6, NULL),
(N'Антонова', N'Вероника', N'Павловна', 6, NULL),
(N'Белов', N'Степан', N'Игоревич', 6, NULL),
(N'Воронова', N'Арина', N'Андреевна', 6, NULL),
(N'Громов', N'Матвей', N'Олегович', 6);
GO

-- Тесты
INSERT INTO Tests (TestName, SubjectID, TeacherID, MinScoreToPass) VALUES
(N'Основы SQL', 4, 5, 3),  -- Базы данных (проходной балл 3 из 5)
(N'Нормализация БД', 4, 5, 4),  -- Базы данных (проходной балл 4 из 6)
(N'Python: основы синтаксиса', 5, 6, 3),  -- Программирование на Python (проходной балл 3 из 5)
(N'Основы микроэкономики', 1, 1, 2),  -- Микроэкономика (проходной балл 2 из 4)
(N'Высшая математика: пределы', 7, 9, 3);  -- Высшая математика (проходной балл 3 из 5)
GO

-- Вопросы
INSERT INTO Questions (TestID, QuestionText, Points) VALUES
(1, N'Какой оператор используется для выборки данных из таблицы?', 1),
(1, N'Какой оператор используется для удаления записей из таблицы?', 1),
(1, N'Какое ключевое слово используется для сортировки результатов?', 1),
(1, N'Какой оператор используется для объединения таблиц?', 2),
(2, N'Что устраняет первая нормальная форма (1НФ)?', 1),
(2, N'Какое условие должно выполняться для 2НФ?', 2),
(2, N'Что характеризует третью нормальную форму?', 2),
(2, N'Какая нормальная форма устраняет транзитивные зависимости?', 1),
(3, N'Какой тип данных используется для хранения целых чисел в Python?', 1),
(3, N'Как объявить список в Python?', 1),
(3, N'Какой метод используется для добавления элемента в список?', 1),
(3, N'Что выведет print(type([]))?', 2),
(4, N'Что изучает микроэкономика?', 1),
(4, N'Что такое спрос?', 1),
(4, N'Как называется точка пересечения кривых спроса и предложения?', 1),
(4, N'Что происходит с ценой при увеличении спроса?', 1),
(5, N'Что такое предел функции?', 1),
(5, N'Чему равен предел lim(x→0) sin(x)/x?', 2),
(5, N'Как называется правило для вычисления предела отношения двух функций?', 1),
(5, N'Что означает непрерывность функции в точке?', 1);
GO

-- Варианты ответов
INSERT INTO Answers (QuestionID, AnswerText, IsCorrect) VALUES
(1, N'SELECT', 1), (1, N'INSERT', 0), (1, N'UPDATE', 0),
(2, N'DELETE', 1), (2, N'DROP', 0), (2, N'REMOVE', 0),
(3, N'ORDER BY', 1), (3, N'SORT BY', 0), (3, N'GROUP BY', 0),
(4, N'JOIN', 1), (4, N'MERGE', 0), (4, N'COMBINE', 0),
(5, N'Повторяющиеся группы', 1), (5, N'Частичные зависимости', 0), (5, N'Транзитивные зависимости', 0),
(6, N'Отсутствие частичных зависимостей от ключа', 1), (6, N'Атомарность атрибутов', 0), (6, N'Отсутствие транзитивных зависимостей', 0),
(7, N'Отсутствие транзитивных зависимостей', 1), (7, N'Атомарность атрибутов', 0), (7, N'Отсутствие частичных зависимостей', 0),
(8, N'3НФ', 1), (8, N'1НФ', 0), (8, N'2НФ', 0),
(9, N'int', 1), (9, N'integer', 0), (9, N'number', 0),
(10, N'[]', 1), (10, N'{}', 0), (10, N'()', 0),
(11, N'append()', 1), (11, N'add()', 0), (11, N'insert()', 0),
(12, N'<class ''list''>', 1), (12, N'<class ''array''>', 0), (12, N'<class ''tuple''>', 0),
(13, N'Поведение отдельных экономических субъектов', 1), (13, N'Экономику страны в целом', 0), (13, N'Международную торговлю', 0),
(14, N'Желание и возможность купить товар', 1), (14, N'Количество произведенного товара', 0), (14, N'Цена товара', 0),
(15, N'Точка равновесия', 1), (15, N'Точка безубыточности', 0), (15, N'Точка насыщения', 0),
(16, N'Растет', 1), (16, N'Падает', 0), (16, N'Не изменяется', 0),
(17, N'Число, к которому стремится функция при приближении аргумента к определенному значению', 1), (17, N'Производная функции', 0), (17, N'Интеграл функции', 0),
(18, N'1', 1), (18, N'0', 0), (18, N'∞', 0),
(19, N'Правило Лопиталя', 1), (19, N'Правило Лейбница', 0), (19, N'Правило Ньютона', 0),
(20, N'Совпадение значения функции с пределом в этой точке', 1), (20, N'Существование производной', 0), (20, N'Монотонность функции', 0);
GO

-- Попытки тестирования
-- TeacherID получается через JOIN с таблицей Tests (создатель теста проводит тестирование)
INSERT INTO TestAttempts (StudentID, TestID, AttemptDate, TotalScore, IsFinalized) VALUES
-- Студенты БИВТ-24-4 проходят тест по БД (TestID=1)
(11, 1, '2024-11-01 09:00:00', 4, 1),  -- Score 4.00 -> TotalScore 4
(12, 1, '2024-11-01 09:00:00', 5, 1),  -- Score 5.00 -> TotalScore 5
(13, 1, '2024-11-01 09:00:00', 4, 1),  -- Score 3.50 -> TotalScore 4 (округление)
(14, 1, '2024-11-01 09:00:00', 2, 1),  -- Score 2.00 -> TotalScore 2
(14, 1, '2024-11-05 10:00:00', 4, 1),  -- Score 3.50 -> TotalScore 4
(15, 1, '2024-11-01 09:00:00', 2, 1),  -- Score 1.50 -> TotalScore 2
(15, 1, '2024-11-05 10:00:00', 3, 1),  -- Score 2.50 -> TotalScore 3
(15, 1, '2024-11-10 11:00:00', 2, 1),  -- Score 2.00 -> TotalScore 2
-- Студенты БПМ-24-4 проходят тест по Python (TestID=3)
(16, 3, '2024-11-15 14:00:00', 5, 1),  -- Score 4.50 -> TotalScore 5
(17, 3, '2024-11-15 14:00:00', 5, 1),  -- Score 5.00 -> TotalScore 5
(18, 3, '2024-11-15 14:00:00', 2, 1),  -- Score 2.00 -> TotalScore 2
(18, 3, '2024-11-20 14:00:00', 3, 1),  -- Score 3.00 -> TotalScore 3
(18, 3, '2024-11-25 14:00:00', 3, 1),  -- Score 2.50 -> TotalScore 3
-- Студенты БИВТ-24-4 проходят тест по нормализации БД (TestID=2)
(11, 2, '2024-11-20 10:00:00', 5, 1),  -- Score 5.00 -> TotalScore 5
(12, 2, '2024-11-20 10:00:00', 6, 1),  -- Score 6.00 -> TotalScore 6
(13, 2, '2024-11-20 10:00:00', 4, 1),  -- Score 4.00 -> TotalScore 4
(13, 2, '2024-11-25 10:00:00', 6, 1),  -- Score 5.50 -> TotalScore 6
-- Студенты ЭК-24-1 проходят тест по микроэкономике (TestID=4)
(1, 4, '2024-11-22 11:00:00', 4, 1),   -- Score 3.50 -> TotalScore 4
(2, 4, '2024-11-22 11:00:00', 4, 1),   -- Score 4.00 -> TotalScore 4
(3, 4, '2024-11-22 11:00:00', 2, 1),   -- Score 2.00 -> TotalScore 2
(3, 4, '2024-11-28 09:00:00', 3, 1),   -- Score 3.00 -> TotalScore 3
-- Студенты МАТ-24-1 проходят тест по математике (TestID=5)
(26, 5, '2024-11-25 09:00:00', 4, 1),  -- Score 3.50 -> TotalScore 4
(27, 5, '2024-11-25 09:00:00', 4, 1),  -- Score 4.00 -> TotalScore 4
(28, 5, '2024-11-25 09:00:00', 2, 1),  -- Score 2.00 -> TotalScore 2
(28, 5, '2024-11-28 09:00:00', 3, 1);  -- Score 3.00 -> TotalScore 3
GO

-- Ответы студентов
-- Ответы студента 11 (БИВТ-24-4) на тест 1 (Основы SQL) - AttemptID=1
INSERT INTO StudentAnswers (AttemptID, QuestionID, AnswerID) VALUES
(1, 1, 1),  -- Правильный ответ
(1, 2, 5),  -- Правильный ответ
(1, 3, 9),  -- Правильный ответ
(1, 4, 13); -- Правильный ответ
-- Ответы студента 12 (БИВТ-24-4) на тест 1 - AttemptID=2
INSERT INTO StudentAnswers (AttemptID, QuestionID, AnswerID) VALUES
(2, 1, 1),  -- Правильный ответ
(2, 2, 5),  -- Правильный ответ
(2, 3, 9),  -- Правильный ответ
(2, 4, 13); -- Правильный ответ
-- Ответы студента 14 (БИВТ-24-4) на тест 1 (первая попытка - неудачная) - AttemptID=4
INSERT INTO StudentAnswers (AttemptID, QuestionID, AnswerID) VALUES
(4, 1, 1),  -- Правильный ответ
(4, 2, 6),  -- Неправильный ответ
(4, 3, 11), -- Неправильный ответ
(4, 4, 13); -- Правильный ответ
GO

-- Связь тестов и групп (списки групп, которые должны быть протестированы)
INSERT INTO TestGroups (TestID, GroupID) VALUES
(1, 3),  -- Тест "Основы SQL" для группы БИВТ-24-4
(2, 3),  -- Тест "Нормализация БД" для группы БИВТ-24-4
(3, 4),  -- Тест "Python: основы синтаксиса" для группы БПМ-24-4
(4, 1),  -- Тест "Основы микроэкономики" для группы ЭК-24-1
(5, 6);  -- Тест "Высшая математика: пределы" для группы МАТ-24-1
GO
